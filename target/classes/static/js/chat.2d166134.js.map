{"version":3,"sources":["webpack:///./src/assets/img/left_black.png","webpack:///./src/views/Chat.vue?66b2","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?6ed9","webpack:///./src/views/Chat.vue","webpack:///./src/assets/css/views/home.css?c4e6","webpack:///./src/assets/css/components/chat.css?c18c"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","directives","name","rawName","value","mensajesNoLeidos","expression","_v","_s","$conversacionElegida","user_dest","ref","onScroll","_l","mensaje","key","id","class","sender_id","userId","fecha","_e","staticStyle","message_type","substr","esArchivo","esImagen","esVideo","esAudio","mostrarOpciones","type","indexOf","_k","keyCode","enviar","enviando","changeAdjunto","adjuntar","enviarPosicion","staticRenderFns","window","Pusher","components","MensajeTexto","MensajeArchivo","MensajeImagen","MensajeVideo","MensajeAudio","MensajePosicion","Loading","data","mensajes","primeraPagina","currentPage","lastPage","mensajeOffset","mostrarLoading","props","computed","mounted","localStorage","getItem","getChat","$refs","chatScroll","addEventListener","that","Echo","broadcaster","wsHost","wsPort","disableStats","forceTLS","enabledTransports","console","log","channel","listen","created","$eventHub","$on","methods","desconectarSocket","extension","message","files","file","onGetChat","$route","params","$axios","getChatPage","pagina","pag","getSeparadores","fechas","filter","cantidad","length","i","m","created_at","$nextTick","scrollToBottom","getConversaciones","target","scrollTop","clientHeight","offset","limit","document","getElementById","setTimeout","texto","inputTexto","FormData","append","user_dest_id","isOverflown","adjuntoFiles","click","forEach","logout","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","component"],"mappings":"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","file":"js/chat.2d166134.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAABHNCSVQICAgIfAhkiAAAAVlJREFUWEfV2c1Nw0AQQOGXAhCUkBLoAOgESsiFHuggR1JBOHIDUQEUgEQJHDhyiCayI8da/86sd8b3jN+3q0ReZ4XtdQXsgQ3waTs6PW1leBOJfwOugV/gbgmEFaAZX6/JIggLQCpeEF/AbbUbhht9PkoLKBovFA2geLwG4CJ+LsBN/ByAq/ipAHfxUwAu48cC3MaPAbiOHwK4j+8DhIjvAoSJTwFCxbcB4eKbgJDxNaAr/q86Uf1ne5jXD97K4/Q7cKOfVWTCowDkDCuIyyIJupseAXJFRZwANeIDuGgtyhPwqluobJ/+bh8pu3biAXjOlqEYnDoTh0J0HerDIPreSoRADL1WcY8YAvT9xLr4Yo8BuEaMBbhFTAG4REwFuEPMAbhCzAW4QWgALhBaQHGEBaAPIX/0yWEp22UFSCF2wH228mqwJaCJeFkiXm5oDZCZa+An98rX8w+YCmb+NJKbQwAAAABJRU5ErkJggg==\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"home-body\"},[_c('div',{staticClass:\"home-right\"},[_c('div',{staticClass:\"chat\"},[_c('div',{staticClass:\"chat-top\"},[_c('img',{attrs:{\"src\":require(\"../assets/img/left_black.png\")},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mensajesNoLeidos > 0),expression:\"mensajesNoLeidos > 0\"}],staticClass:\"chat-mobile-noLeidos\",on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(_vm._s(_vm.mensajesNoLeidos))]),_c('p',{on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(\" \"+_vm._s(_vm.$conversacionElegida != null ? _vm.$conversacionElegida.user_dest.name : \"\")+\" \")])]),_c('div',{ref:\"chatScroll\",staticClass:\"chat-scroll\",attrs:{\"id\":\"chatScroll\"},on:{\"scroll\":_vm.onScroll}},_vm._l((_vm.mensajes),function(mensaje){return _c('div',{key:mensaje.id,staticClass:\"chat-container\",class:{\n              'chat-mensaje-propio': mensaje.sender_id == _vm.userId\n            },attrs:{\"id\":mensaje.id}},[(mensaje.fecha != null)?_c('div',{staticClass:\"chat-separador\"},[_c('label',[_vm._v(_vm._s(mensaje.fecha))])]):_vm._e(),(mensaje.fecha == null)?_c('div',[(mensaje.sender_id != _vm.userId)?_c('span',{staticClass:\"chat-tail\"},[_c('svg',{staticStyle:{\"display\":\"block\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 8 13\",\"width\":\"8\",\"height\":\"13\"}},[_c('path',{attrs:{\"opacity\":\".13\",\"fill\":\"#0000000\",\"d\":\"M1.533 3.568L8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z\"}}),_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M1.533 2.568L8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z\"}})])]):_vm._e(),(mensaje.sender_id == _vm.userId)?_c('span',{staticClass:\"chat-tail-out\"},[_c('svg',{staticClass:\"chat-tail-svg\",staticStyle:{\"display\":\"block\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 8 13\",\"width\":\"8\",\"height\":\"13\"}},[_c('path',{attrs:{\"opacity\":\".13\",\"d\":\"M5.188 1H0v11.193l6.467-8.625C7.526 2.156 6.958 1 5.188 1z\"}}),_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M5.188 0H0v11.193l6.467-8.625C7.526 1.156 6.958 0 5.188 0z\"}})])]):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'TextMessage'\n                )?_c('MensajeTexto',{attrs:{\"mensaje\":mensaje}}):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'PositionMessage'\n                )?_c('MensajePosicion',{attrs:{\"mensaje\":mensaje}}):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'FileMessage' &&\n                    _vm.esArchivo(mensaje)\n                )?_c('MensajeArchivo',{attrs:{\"mensaje\":mensaje}}):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'FileMessage' &&\n                    _vm.esImagen(mensaje)\n                )?_c('MensajeImagen',{attrs:{\"mensaje\":mensaje}}):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'FileMessage' &&\n                    _vm.esVideo(mensaje)\n                )?_c('MensajeVideo',{attrs:{\"mensaje\":mensaje}}):_vm._e(),(\n                  mensaje.message_type != null &&\n                    mensaje.message_type.substr(11, 100) == 'FileMessage' &&\n                    _vm.esAudio(mensaje)\n                )?_c('MensajeAudio',{attrs:{\"mensaje\":mensaje}}):_vm._e()],1):_vm._e()])}),0),_c('div',{staticClass:\"chat-bottom\"},[_c('div',{staticClass:\"chat-adjuntar\",attrs:{\"title\":\"Adjuntar\"}},[_c('img',{attrs:{\"src\":require(\"../assets/img/adjuntar.png\")},on:{\"click\":function($event){_vm.mostrarOpciones = true}}})]),_c('input',{ref:\"inputTexto\",attrs:{\"type\":\"text\",\"placeholder\":\"Escribe un mensaje aquí\",\"maxlength\":\"140\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enviar()}}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.enviando),expression:\"!enviando\"}],staticClass:\"chat-enviar\",attrs:{\"src\":require(\"../assets/img/enviar.png\")},on:{\"click\":function($event){return _vm.enviar()}}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.enviando),expression:\"enviando\"}],staticClass:\"chat-enviar\",staticStyle:{\"opacity\":\"0.5\"},attrs:{\"src\":require(\"../assets/img/enviar.png\")}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mostrarOpciones),expression:\"mostrarOpciones\"}],staticClass:\"chat-opciones\"},[_c('div',{staticClass:\"chat-opciones-mask\",on:{\"click\":function($event){_vm.mostrarOpciones = false}}}),_c('div',{staticClass:\"chat-opciones-container\"},[_c('div',[_c('input',{ref:\"adjuntoFiles\",staticClass:\"app-hide\",attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":function($event){return _vm.changeAdjunto()}}}),_c('img',{staticClass:\"chat-opciones-img\",attrs:{\"src\":require(\"../assets/img/adjuntar.png\")},on:{\"click\":function($event){return _vm.adjuntar()}}})]),_c('div',[_c('img',{staticClass:\"chat-opciones-img\",attrs:{\"src\":require(\"../assets/img/ubicacion.png\")},on:{\"click\":function($event){return _vm.enviarPosicion()}}})])])])])])]),_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mostrarLoading),expression:\"mostrarLoading\"}]})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <div class=\"home-body\">\r\n      <div class=\"home-right\">\r\n        <div class=\"chat\">\r\n          <div class=\"chat-top\">\r\n            <img @click=\"$router.back()\" src=\"../assets/img/left_black.png\">\r\n            <div\r\n              class=\"chat-mobile-noLeidos\"\r\n              v-show=\"mensajesNoLeidos > 0\"\r\n              @click=\"$router.back()\"\r\n            >{{mensajesNoLeidos}}</div>\r\n            <p @click=\"$router.back()\">\r\n              {{\r\n              $conversacionElegida != null\r\n              ? $conversacionElegida.user_dest.name\r\n              : \"\"\r\n              }}\r\n            </p>\r\n          </div>\r\n          <div id=\"chatScroll\" class=\"chat-scroll\" ref=\"chatScroll\" @scroll=\"onScroll\">\r\n            <div\r\n              v-for=\"mensaje in mensajes\"\r\n              :key=\"mensaje.id\"\r\n              :id=\"mensaje.id\"\r\n              class=\"chat-container\"\r\n              v-bind:class=\"{\r\n                'chat-mensaje-propio': mensaje.sender_id == userId\r\n              }\"\r\n            >\r\n              <div v-if=\"mensaje.fecha != null\" class=\"chat-separador\">\r\n                <label>{{mensaje.fecha}}</label>\r\n              </div>\r\n              <div v-if=\"mensaje.fecha == null\">\r\n                <span class=\"chat-tail\" v-if=\"mensaje.sender_id != userId\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 8 13\"\r\n                    width=\"8\"\r\n                    height=\"13\"\r\n                    style=\"display: block;\"\r\n                  >\r\n                    <path\r\n                      opacity=\".13\"\r\n                      fill=\"#0000000\"\r\n                      d=\"M1.533 3.568L8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z\"\r\n                    ></path>\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M1.533 2.568L8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z\"\r\n                    ></path>\r\n                  </svg>\r\n                </span>\r\n                <span class=\"chat-tail-out\" v-if=\"mensaje.sender_id == userId\">\r\n                  <svg\r\n                    class=\"chat-tail-svg\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 8 13\"\r\n                    width=\"8\"\r\n                    height=\"13\"\r\n                    style=\"display: block;\"\r\n                  >\r\n                    <path\r\n                      opacity=\".13\"\r\n                      d=\"M5.188 1H0v11.193l6.467-8.625C7.526 2.156 6.958 1 5.188 1z\"\r\n                    ></path>\r\n                    <path\r\n                      fill=\"currentColor\"\r\n                      d=\"M5.188 0H0v11.193l6.467-8.625C7.526 1.156 6.958 0 5.188 0z\"\r\n                    ></path>\r\n                  </svg>\r\n                </span>\r\n                <MensajeTexto\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'TextMessage'\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajeTexto>\r\n                <MensajePosicion\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'PositionMessage'\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajePosicion>\r\n                <MensajeArchivo\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'FileMessage' &&\r\n                      esArchivo(mensaje)\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajeArchivo>\r\n                <MensajeImagen\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'FileMessage' &&\r\n                      esImagen(mensaje)\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajeImagen>\r\n                <MensajeVideo\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'FileMessage' &&\r\n                      esVideo(mensaje)\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajeVideo>\r\n                <MensajeAudio\r\n                  v-if=\"\r\n                    mensaje.message_type != null &&\r\n                      mensaje.message_type.substr(11, 100) == 'FileMessage' &&\r\n                      esAudio(mensaje)\r\n                  \"\r\n                  :mensaje=\"mensaje\"\r\n                ></MensajeAudio>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"chat-bottom\">\r\n            <div class=\"chat-adjuntar\" title=\"Adjuntar\">\r\n              <img src=\"../assets/img/adjuntar.png\" @click=\"mostrarOpciones = true\">\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Escribe un mensaje aquí\"\r\n              ref=\"inputTexto\"\r\n              v-on:keyup.enter=\"enviar()\"\r\n              maxlength=\"140\"\r\n            >\r\n            <img\r\n              v-show=\"!enviando\"\r\n              class=\"chat-enviar\"\r\n              src=\"../assets/img/enviar.png\"\r\n              @click=\"enviar()\"\r\n            >\r\n            <img\r\n              v-show=\"enviando\"\r\n              class=\"chat-enviar\"\r\n              style=\"opacity: 0.5;\"\r\n              src=\"../assets/img/enviar.png\"\r\n            >\r\n          </div>\r\n          <div v-show=\"mostrarOpciones\" class=\"chat-opciones\">\r\n            <div class=\"chat-opciones-mask\" @click=\"mostrarOpciones = false\"></div>\r\n            <div class=\"chat-opciones-container\">\r\n              <div>\r\n                <input\r\n                  type=\"file\"\r\n                  class=\"app-hide\"\r\n                  @change=\"changeAdjunto()\"\r\n                  ref=\"adjuntoFiles\"\r\n                  multiple\r\n                >\r\n                <img class=\"chat-opciones-img\" src=\"../assets/img/adjuntar.png\" @click=\"adjuntar()\">\r\n              </div>\r\n              <div>\r\n                <img\r\n                  class=\"chat-opciones-img\"\r\n                  src=\"../assets/img/ubicacion.png\"\r\n                  @click=\"enviarPosicion()\"\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Loading v-show=\"mostrarLoading\"></Loading>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MensajeTexto from \"@/components/MensajeTexto.vue\";\r\nimport MensajeArchivo from \"@/components/MensajeArchivo.vue\";\r\nimport MensajeImagen from \"@/components/MensajeImagen.vue\";\r\nimport MensajeVideo from \"@/components/MensajeVideo.vue\";\r\nimport MensajeAudio from \"@/components/MensajeAudio.vue\";\r\nimport MensajePosicion from \"@/components/MensajePosicion.vue\";\r\nimport Echo from \"laravel-echo\";\r\nimport Loading from \"@/components/Loading.vue\";\r\n\r\nwindow.Pusher = require(\"pusher-js\");\r\n\r\nexport default {\r\n  name: \"Chat\",\r\n  components: {\r\n    MensajeTexto,\r\n    MensajeArchivo,\r\n    MensajeImagen,\r\n    MensajeVideo,\r\n    MensajeAudio,\r\n    MensajePosicion,\r\n    Loading\r\n  },\r\n  data() {\r\n    return {\r\n      mensajes: [],\r\n      userId: null,\r\n      primeraPagina: true,\r\n      currentPage: 0,\r\n      lastPage: 0,\r\n      mensajeOffset: null,\r\n      mostrarLoading: false,\r\n      enviando: false,\r\n      mensajesNoLeidos: 0,\r\n      mostrarOpciones: false\r\n    };\r\n  },\r\n  props: {},\r\n  computed: {},\r\n  mounted() {\r\n    this.mostrarLoading = true;\r\n    this.userId = localStorage.getItem(\"$userId\");\r\n    this.getChat();\r\n    this.mensajes = [];\r\n    this.$refs.chatScroll.addEventListener(\"touchmove\", this.onScroll);\r\n\r\n    var that = this;\r\n    window.Echo = new Echo({\r\n      broadcaster: \"pusher\",\r\n      key: \"ASDASD2121\",\r\n      wsHost: \"23.237.173.86\",\r\n      wsPort: 6001,\r\n      // wssPort: 6001,\r\n      disableStats: true,\r\n      forceTLS: false,\r\n      enabledTransports: [\"ws\"]\r\n    });\r\n    console.log(\r\n      \"Conectando al websocket canal: \" +\r\n        \"user.\" +\r\n        localStorage.getItem(\"$userId\")\r\n    );\r\n    window.Echo.channel(\"user.\" + localStorage.getItem(\"$userId\")).listen(\r\n      \"NewMessage\",\r\n      e => {\r\n        console.log(\"Recibo mensaje por websocket\");\r\n        console.log(e);\r\n        that.getChat();\r\n      }\r\n    );\r\n  },\r\n  created() {\r\n    this.$eventHub.$on(\"chat-get\", id => this.onGetChat(id));\r\n  },\r\n  methods: {\r\n    desconectarSocket() {\r\n      window.Echo.channel(\r\n        \"user.\" + localStorage.getItem(\"$userId\")\r\n      ).stopListening(\"NewMessage\");\r\n    },\r\n    esImagen(mensaje) {\r\n      var extension = mensaje.message.files[0].file\r\n        .split(\".\")\r\n        [mensaje.message.files[0].file.split(\".\").length - 1].toLowerCase();\r\n      if (\r\n        extension == \"png\" ||\r\n        extension == \"jpg\" ||\r\n        extension == \"svg\" ||\r\n        extension == \"jpeg\"\r\n      ) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    esVideo(mensaje) {\r\n      var extension = mensaje.message.files[0].file\r\n        .split(\".\")\r\n        [mensaje.message.files[0].file.split(\".\").length - 1].toLowerCase();\r\n      if (\r\n        extension == \"webm\" ||\r\n        extension == \"mkv\" ||\r\n        extension == \"flv\" ||\r\n        extension == \"mp4\" ||\r\n        extension == \"mov\" ||\r\n        extension == \"avi\"\r\n      ) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    esAudio(mensaje) {\r\n      var extension = mensaje.message.files[0].file\r\n        .split(\".\")\r\n        [mensaje.message.files[0].file.split(\".\").length - 1].toLowerCase();\r\n      if (extension == \"m4a\" || extension == \"qt\" || extension == \"4mb\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    esArchivo(mensaje) {\r\n      if (\r\n        this.esImagen(mensaje) == false &&\r\n        this.esVideo(mensaje) == false &&\r\n        this.esAudio(mensaje) == false\r\n      ) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    onGetChat(id) {\r\n      if (id != null) {\r\n        this.mostrarLoading = true;\r\n      }\r\n      this.getChat(id);\r\n    },\r\n    getChat(id) {\r\n      if (id == null) {\r\n        id = this.$route.params.id;\r\n      } else {\r\n        this.mensajes = [];\r\n        this.primeraPagina = true;\r\n      }\r\n      var that = this;\r\n      this.$axios\r\n        .get(this.$localurl + \"/api/v1/messages/\" + id)\r\n        .then(function(response) {\r\n          that.mostrarLoading = false;\r\n          if (\r\n            that.primeraPagina == true &&\r\n            !that.isOverflown(document.getElementById(\"chatScroll\"))\r\n          ) {\r\n            that.primeraPagina = false;\r\n            that.getChatPage(2);\r\n          }\r\n          var scrollear = false;\r\n          that.lastPage = response.data.messages.last_page;\r\n          response.data.messages.data.reverse();\r\n          response.data.messages.data.forEach(m => {\r\n            if (\r\n              !that.mensajes.some(mensaje => mensaje.id == m.id) &&\r\n              m.conversation_id == that.$route.params.id\r\n            ) {\r\n              that.mensajes.push(m);\r\n              scrollear = true;\r\n            }\r\n          });\r\n          if (scrollear == true) {\r\n            that.mensajeOffset = that.mensajes[that.mensajes.length - 1];\r\n          }\r\n          that.getSeparadores();\r\n        })\r\n        .catch(function(response) {\r\n          that.mostrarLoading = false;\r\n          if (\r\n            response != null &&\r\n            response.response != null &&\r\n            response.response.status == 401\r\n          ) {\r\n            localStorage.removeItem(\"$expire\");\r\n            localStorage.removeItem(\"$userId\");\r\n            if (window.location.pathname.split(\"/\").reverse()[0] != \"login\") {\r\n              that.desconectarSocket();\r\n              that.$router.push(\"/login\");\r\n            }\r\n          }\r\n        });\r\n    },\r\n    getChatPage(pagina) {\r\n      this.mensajeOffset = this.mensajes[0];\r\n      if (this.mensajeOffset != null && this.mensajeOffset.id == null) {\r\n        this.mensajeOffset = this.mensajes[1];\r\n      }\r\n      this.currentPage = pagina;\r\n      var pag = \"\";\r\n      if (pagina != null) {\r\n        pag = \"?page=\" + pagina;\r\n      }\r\n      var that = this;\r\n      this.$axios\r\n        .get(this.$localurl + \"/api/v1/messages/\" + this.$route.params.id + pag)\r\n        .then(function(response) {\r\n          that.mostrarLoading = false;\r\n          response.data.messages.data.reverse();\r\n          that.mensajes = response.data.messages.data.concat(that.mensajes);\r\n          that.getSeparadores();\r\n        })\r\n        .catch(function(response) {\r\n          that.mostrarLoading = false;\r\n          if (\r\n            response != null &&\r\n            response.response != null &&\r\n            response.response.status == 401\r\n          ) {\r\n            localStorage.removeItem(\"$expire\");\r\n            if (window.location.pathname.split(\"/\").reverse()[0] != \"login\") {\r\n              that.desconectarSocket();\r\n              that.$router.push(\"/login\");\r\n            }\r\n          }\r\n        });\r\n    },\r\n    getSeparadores() {\r\n      var fechas = [];\r\n      this.mensajes = this.mensajes.filter(m => m.fecha == null);\r\n      var cantidad = this.mensajes.length;\r\n      for (var i = 0; i < cantidad; i++) {\r\n        var m = this.mensajes[i];\r\n        if (m.created_at != null) {\r\n          var d = new Date(m.created_at);\r\n          d.setHours(d.getHours() + 3);\r\n          let day = d.getDate();\r\n          let month = d.getMonth() + 1;\r\n          let year = d.getFullYear();\r\n          let fecha = day + \"/\" + month + \"/\" + year;\r\n          var today = new Date();\r\n          let todayday = today.getDate();\r\n          let todaymonth = today.getMonth() + 1;\r\n          let todayyear = today.getFullYear();\r\n          if (day != todayday || month != todaymonth || year != todayyear) {\r\n            if (fechas.includes(fecha) == false) {\r\n              var days = [\r\n                \"Domingo\",\r\n                \"Lunes\",\r\n                \"Martes\",\r\n                \"Miércoles\",\r\n                \"Jueves\",\r\n                \"Viernes\",\r\n                \"Sábado\"\r\n              ];\r\n              fecha = days[d.getDay()] + \" \" + fecha;\r\n              fechas.push(fecha);\r\n              if (!this.mensajes.some(m => m.fecha == fecha)) {\r\n                this.mensajes.splice(i, 0, { fecha: fecha });\r\n                cantidad++;\r\n              }\r\n            }\r\n          } else {\r\n            if (!this.mensajes.some(m => m.fecha == \"HOY\")) {\r\n              this.mensajes.splice(i, 0, { fecha: \"HOY\" });\r\n              cantidad++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      var that = this;\r\n      this.$nextTick(() => {\r\n        that.scrollToBottom();\r\n      });\r\n    },\r\n    getConversaciones() {\r\n      var that = this;\r\n      this.$axios\r\n        .get(this.$localurl + \"/api/v1/messages\")\r\n        .then(function(response) {\r\n          that.mensajesNoLeidos = 0;\r\n          response.data.conversations.forEach(c => {\r\n            if (c.id != that.$route.params.id) {\r\n              that.mensajesNoLeidos = that.mensajesNoLeidos + c.ammount_no_read;\r\n            }\r\n          });\r\n        })\r\n        .catch(function() {});\r\n    },\r\n    onScroll() {\r\n      var target = this.$refs.chatScroll;\r\n      if (target.scrollTop < target.clientHeight * 0.1) {\r\n        if (this.currentPage < this.lastPage) {\r\n          this.offset = this.offset + this.limit;\r\n          this.currentPage++;\r\n          this.getChatPage(this.currentPage);\r\n        }\r\n      }\r\n    },\r\n    scrollToBottom() {\r\n      var that = this;\r\n      this.$nextTick(() => {\r\n        if (that.mensajeOffset != null) {\r\n          if (document.getElementById(that.mensajeOffset.id) != null) {\r\n            document.getElementById(\r\n              \"chatScroll\"\r\n            ).scrollTop = document.getElementById(\r\n              that.mensajeOffset.id\r\n            ).offsetTop;\r\n          } else {\r\n            setTimeout(function() {\r\n              that.scrollToBottom();\r\n            }, 200);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    enviar() {\r\n      if (this.enviando == false) {\r\n        this.enviando = true;\r\n        this.scrollToBottom();\r\n        var texto = this.$refs.inputTexto.value;\r\n        if (texto != \"\") {\r\n          this.$refs.inputTexto.value = \"\";\r\n          var data = new FormData();\r\n          data.append(\"message\", texto);\r\n          data.append(\"receiver_id\", this.$route.params.user_dest_id);\r\n          var that = this;\r\n          this.$axios\r\n            .post(this.$localurl + \"/api/v1/messages/textMessage\", data)\r\n            .then(function() {\r\n              that.enviando = false;\r\n              that.getChat();\r\n            })\r\n            .catch(function(response) {\r\n              that.enviando = false;\r\n              if (\r\n                response != null &&\r\n                response.response != null &&\r\n                response.response.status == 401\r\n              ) {\r\n                localStorage.removeItem(\"$expire\");\r\n                localStorage.removeItem(\"$userId\");\r\n                if (\r\n                  window.location.pathname.split(\"/\").reverse()[0] != \"login\"\r\n                ) {\r\n                  that.$router.push(\"/login\");\r\n                }\r\n              }\r\n              alert(\"Se produjo un error, reintente\");\r\n            });\r\n        }\r\n      }\r\n    },\r\n    isOverflown(element) {\r\n      return (\r\n        element.scrollHeight > element.clientHeight ||\r\n        element.scrollWidth > element.clientWidth\r\n      );\r\n    },\r\n    adjuntar() {\r\n      this.$refs.adjuntoFiles.click();\r\n    },\r\n    changeAdjunto() {\r\n      if (this.$refs.adjuntoFiles.files.length > 0) {\r\n        var data = new FormData();\r\n        data.append(\"message\", \"archivos\");\r\n        data.append(\"receiver_id\", this.$route.params.user_dest_id);\r\n\r\n        this.$refs.adjuntoFiles.files.forEach(function(value, i) {\r\n          data.append(\"file[\" + i + \"]\", value);\r\n        });\r\n\r\n        var that = this;\r\n        this.$axios\r\n          .post(this.$localurl + \"/api/v1/messages/fileMessage\", data)\r\n          .then(function() {\r\n            that.getChat();\r\n          })\r\n          .catch(function(response) {\r\n            if (\r\n              response != null &&\r\n              response.response != null &&\r\n              response.response.status == 401\r\n            ) {\r\n              localStorage.removeItem(\"$expire\");\r\n              localStorage.removeItem(\"$userId\");\r\n              if (window.location.pathname.split(\"/\").reverse()[0] != \"login\") {\r\n                that.desconectarSocket();\r\n                that.$router.push(\"/login\");\r\n              }\r\n            }\r\n            alert(\"Se produjo un error, reintente\");\r\n          });\r\n      }\r\n    },\r\n    logout() {\r\n      var that = this;\r\n      this.$axios\r\n        .post(this.$localurl + \"/api/v1/auth/logout\")\r\n        .then(function() {\r\n          that.desconectarSSE();\r\n          localStorage.removeItem(\"$token\");\r\n          localStorage.removeItem(\"$userId\");\r\n          localStorage.removeItem(\"$expire\");\r\n          if(window.location.pathname.split(\"/\").reverse()[0] != \"login\"){\r\n              that.$router.push(\"/login\");\r\n            }\r\n        })\r\n        .catch(function(error) {\r\n          // handle error\r\n          console.log(error);\r\n        });\r\n    },\r\n    enviarPosicion(){\r\n      var that = this;\r\n      this.mostrarOpciones = false;\r\n      navigator.geolocation.getCurrentPosition(function(position) {\r\n        that.enviando = true;\r\n        var data = new FormData();\r\n        data.append(\"lat\", position.coords.latitude);\r\n        data.append(\"lon\", position.coords.longitude);\r\n        data.append(\"alt\", (position.coords.altitude != null ? position.coords.altitude : 0));\r\n        data.append(\"receiver_id\", that.$route.params.user_dest_id);\r\n        that.$axios\r\n            .post(that.$localurl + \"/api/v1/messages/positionMessage\", data)\r\n            .then(function() {\r\n              that.enviando = false;\r\n              that.getChat();\r\n            })\r\n            .catch(function(response) {\r\n              that.enviando = false;\r\n              if (response != null && response.response != null && response.response.status == 401) {\r\n                console.log(\"desconecto socket\");\r\n                that.$eventHub.$emit(\"home-desconectar-socket\");\r\n                localStorage.removeItem(\"$expire\");\r\n                localStorage.removeItem(\"$userId\");\r\n                if(window.location.pathname.split(\"/\").reverse()[0] != \"login\"){\r\n                that.$router.push(\"/login\");\r\n              }\r\n              }\r\n              alert(\"Se produjo un error, reintente\");\r\n            });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped src=\"../assets/css/components/chat.css\"></style>\r\n<style scoped src=\"../assets/css/views/home.css\"></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=1ee42028&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"../assets/css/components/chat.css?vue&type=style&index=0&id=1ee42028&scoped=true&lang=css&\"\nimport style1 from \"../assets/css/views/home.css?vue&type=style&index=1&id=1ee42028&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ee42028\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./home.css?vue&type=style&index=1&id=1ee42028&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./home.css?vue&type=style&index=1&id=1ee42028&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./chat.css?vue&type=style&index=0&id=1ee42028&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./chat.css?vue&type=style&index=0&id=1ee42028&scoped=true&lang=css&\""],"sourceRoot":""}